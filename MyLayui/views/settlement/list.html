<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layuiAdmin 网站用户</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../../layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../layuiadmin/style/admin.css" media="all">
</head>
<body>





<div class="layui-fluid">


    <div class="layui-card">

        <div class="layui-tab">
            <ul class="layui-tab-title">
                <li class="layui-this">网站设置</li>
                <li>用户管理</li>
                <li>权限分配</li>
                <li>商品管理</li>
                <li>订单管理</li>
            </ul>
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">
                    1. 高度默认自适应，也可以随意固宽。
                    <br>2. Tab进行了响应式处理，所以无需担心数量多少。
                </div>
                <div class="layui-tab-item">内容2</div>
                <div class="layui-tab-item">内容3</div>
                <div class="layui-tab-item">内容4</div>
                <div class="layui-tab-item">内容5</div>
            </div>
        </div>

        <div class="layui-card-body">

            <table id="LAY-settlement-list" lay-filter="LAY-settlement-list"></table>
            <script type="text/html" id="imgTpl">
                <img style="display: inline-block; width: 50%; height: 100%;" src={{ d.avatar }}>
            </script>
            <script type="text/html" id="table-useradmin-webuser">
                <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i
                        class="layui-icon layui-icon-edit"></i>编辑</a>
                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i
                        class="layui-icon layui-icon-delete"></i>删除</a>
            </script>
        </div>
    </div>
</div>

<script src="../../layuiadmin/layui/layui.js"></script>
<script>
    layui.config({
        base: '../../layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'useradmin', 'table'], function () {
        var $ = layui.$
            , form = layui.form
            , table = layui.table;

        table.render({
            elem: '#LAY-settlement-list'
            , toolbar: '#test-table-toolbar-toolbarDemo'
            , cols: [[
                {field: 'id', title: 'ID'}
                , {field: 'type', hide: true}
                , {field: 'name', title: '名称', edit: true}
                , {title: "操作", toolbar: "#table-useradmin-webuser"}
            ]]
            , page: false
            , data: [
                {'id': '1', 'name': "lbc", 'type': "A1"}
                , {
                    'id': '2', 'name': "lbj", 'type': "A2"
                }
            ]
            , done: function (res, curr, count) {
                var tableView = this.elem.next(); // 当前表格渲染之后的视图
                // for(var i in res.data){ //遍历整个表格数据 // 遍历数组不建议用in
                layui.each(res.data, function (i, item) {
                    if (item.type == "A2") {
                        //var a=$('tr[data-index=' + i + ']');
                        //a.css("background-color", "#CCCCCC");
                        //a.find('td').data('edit',false);
                        tableView.find('tr[data-index=' + i + ']').css("background-color", "#CCCCCC").find('td').data('edit', false)
                    }
                });
            }
        });

        // table.on('tool(LAY-settlement-list)', function (obj) {
        //         console.log(obj);
        //         var value = obj.value //得到修改后的值
        //             , data = obj.data //得到所在行所有键值
        //             , field = obj.field; //得到字段
        //         if (data.type == 'A2') {// 设置输入框为失去焦点状态 -- 实现禁止修改
        //
        //             $(this).find('input').blur();
        //         }
        //     }
        // );

        //事件
        var active = {};

        $('.layui-btn.layuiadmin-btn-useradmin').on('click', function () {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
</script>
</body>
</html>
